<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="DromHubSettings.Pages.MailSettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:helpers="using:DromHubSettings.Helpers"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="using:DromHubSettings.Models"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Grid>
        <Grid.RowDefinitions>
            <!-- (0) Заголовок и описание -->
            <RowDefinition Height="Auto"/>
            <!-- (1) Основное содержимое (прокручиваемое) -->
            <RowDefinition Height="*"/>
            <!-- (2) Кнопка сохранения -->
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- (0) Заголовок и описание -->
        <StackPanel Grid.Row="0" Margin="36,24,36,16">
            <TextBlock Text="Настройки почты"
                       Style="{StaticResource TitleTextBlockStyle}"/>
            <TextBlock Text="Укажите учетные данные для получения и выгрузки прайс-листов."
                       Style="{ThemeResource BodyTextBlockStyle}"/>
        </StackPanel>

        <!-- (1) Основное содержимое со скроллом -->
        <ScrollViewer Grid.Row="1"
                      Margin="0"
                      VerticalScrollBarVisibility="Auto"
                      VerticalScrollMode="Auto">
            <StackPanel Margin="36,0,36,0" Spacing="12">

                <!-- Почта для получения (при желании можно добавить TextBox здесь) -->
                <TextBlock Text="Почта для получения"
                           Style="{StaticResource BodyStrongTextBlockStyle}"/>
                <TextBox x:Name="DownloadEmailTextBox"
                         Text="{x:Bind ViewModel.Settings.DownloadEmail, Mode=TwoWay}"
                         PlaceholderText="Введите почту для получения"/>

                <!-- Пароль для получения -->
                <TextBlock Text="Пароль для получения"
                           Style="{StaticResource BodyStrongTextBlockStyle}"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <PasswordBox x:Name="DownloadPasswordBox"
                                 Grid.Column="0"
                                 PlaceholderText="Введите пароль для получения"
                                 helpers:PasswordBoxHelper.BoundPassword="{x:Bind ViewModel.Settings.DownloadPassword, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                 PasswordRevealMode="Peek"/>

                    <CheckBox Grid.Column="1"
                              Content="Показать пароль"
                              Margin="8,0,0,0"
                              Checked="ShowDownloadPasswordCheckBox_Checked"
                              Unchecked="ShowDownloadPasswordCheckBox_Unchecked"/>
                </Grid>

                <!-- Отступ между секциями -->
                <Rectangle Height="16" Fill="Transparent"/>

                <!-- Почта для выгрузки -->
                <TextBlock Text="Почта для выгрузки"
                           Style="{StaticResource BodyStrongTextBlockStyle}"/>
                <TextBox x:Name="UploadEmailTextBox"
                         Text="{x:Bind ViewModel.Settings.UploadEmail, Mode=TwoWay}"
                         PlaceholderText="Введите почту для выгрузки"/>

                <!-- Пароль для выгрузки -->
                <TextBlock Text="Пароль для выгрузки"
                           Style="{StaticResource BodyStrongTextBlockStyle}"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <PasswordBox x:Name="UploadPasswordBox"
                                 Grid.Column="0"
                                 PlaceholderText="Введите пароль для выгрузки"
                                 helpers:PasswordBoxHelper.BoundPassword="{x:Bind ViewModel.Settings.UploadPassword, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                 PasswordRevealMode="Peek"/>

                    <CheckBox Grid.Column="1"
                              Content="Показать пароль"
                              Margin="8,0,0,0"
                              Checked="ShowUploadPasswordCheckBox_Checked"
                              Unchecked="ShowUploadPasswordCheckBox_Unchecked"/>
                </Grid>
            </StackPanel>
        </ScrollViewer>

        <!-- (2) Кнопка сохранения -->
        <StackPanel Grid.Row="2"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="0,16,16,16">
            <Button Content="Сохранить изменения" Click="SaveButton_Click"/>
        </StackPanel>
    </Grid>
</Page>
